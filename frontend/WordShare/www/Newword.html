<!DOCTYPE HTML>

<html lang="de">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Word Share - New word</title>
        <link href="css/main.css" rel=stylesheet>
        <link href="css/newword.css" rel=stylesheet>
        <script language="javascript" type="text/javascript" src="js/cookiefunctions.js"></script>
        <script language="javascript" type="text/javascript" src="js/logincheck.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Ubuntu|Cabin|PT+Sans+Narrow" rel="stylesheet">
    </head>

    <body>


      <h1 class="Name">Add a new word!</h1>
      <main>
        <a class="text"> Please enter a word in your native language to share it with the WordShare community! </a>
          <input type="text" id="word" class="input" placeholder="Word" onkeyup="showHint(this.value);" onfocus="hideIconBar();" onfocusout="hideIconBar();" required>
          <input type="text" id="transword" class="input" placeholder="Translation" onfocus="hideIconBar();" onfocusout="hideIconBar();" required> <br>
          <!--  <a href="daily-word.html"><p> <button onclick="js/sendword.js" type="submit" class="button" id="Hinzuf端gen"> Add </button></a>-->
          <button onclick="sendword();" type="submit" class="button" id="Hinzuf端gen"> Add </button>
          <div class="exwords">
<p>Already existing: <span id="txtHint"></span></p>
          </div>
      </main>
      <div class="icon-bar" id="icon-bar">
        <a href="Newword.html"> <img height="50px" style="margin-right:12%" src="pics\add.png"></a>
        <a href="daily-word.html"> <img height="50px" style="margin-top:5%" src="pics\word.png"></a>
        <a href="wordcheck.html"> <img height="50px" style="margin-left:12%" src="pics\edit.png"></a>
      </div>
    </body>
<script type="text/javascript">

function showHint(input){
  //Eingabe vorhanden?
  if (input.length == 0) {
        document.getElementById("txtHint").innerHTML = "";
        return;
//Ausgabe der vorhandenen Worte
      }else{
var exwords = gethtml("http://wordshare.kaiseritea.de/server/functions/exwords.php?input=" + input);
document.getElementById("txtHint").innerHTML = exwords;
}
}

  function sendword() {
    //get Eingaben des Benutzers
    var word  = document.getElementById('word').value;
    var transword  = document.getElementById('transword').value;
    //  var user = getCookie("username");
    var user = "1"
    //sende Daten an addWord  function httpGet(theUrl){
    var success = gethtml("http://wordshare.kaiseritea.de/server/functions/addWord.php?word=" + word + "&&transword=" + transword + "&&user=" + user);
    console.log(success);
    if (success == "1"){
        alert("Danke f端r dein Word. Es wird nun noch verifiziert.");
    }
    else {
      alert("Entweder es gibt dein Wort bereits, oder wir haben Mist gebaut.")
    }
  }

  function gethtml(theU){
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theU, false ); // false for synchronous request
    xmlHttp.send( null );
   return xmlHttp.responseText;
  }

</script>

<script>

  function hideIconBar() {
    console.log("neee gr端nes essen mog i ni");
      var x = document.getElementById("icon-bar");
      var y = document.getElementById("word");
      var z = document.getElementById("transword");
      if (y === document.activeElement || z === document.activeElement){
           x.style.display = "none";
           console.log("Funktion wird aufgerufen");
      }
      else{
      x.style.display = "block";
      }
    //icon-bar.style.visibility="hidden";
    //console.log("Funktion wird aufgerufen!");
  }
  </script>
<!-- <script src="/js/sendword.js" type="text/javascript"></script> -->
</html>
