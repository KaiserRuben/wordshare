<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  <title>Verification</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!--  CSS inplementierung in externer Datei-->
  <!--<link rel="stylesheet" href="css/daily_word.css" type="text/css">-->
  <link rel="stylesheet" href="css/main.css" type="text/css">
  <link rel="stylesheet" href="css/verification.css" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu|Cabin|PT+Sans+Narrow" rel="stylesheet">
  <script language="javascript" type="text/javascript" src="js/cookiefunctions.js"></script>
  <script language="javascript" type="text/javascript" src="js/logincheck.js"></script>
</head>


<body>
  <footer>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <div class="icon-bar">
      <a href="#"> <img height="50px" style="margin-right:12%" src="\pics\add.png"></a>
      <a href="#"> <img height="50px" style="margin-top:5%" src="\pics\word.png"></a>
      <a href="#"> <img height="50px" style="margin-left:12%" src="\pics\edit.png"></a>
    </div>
  </footer>
  <br>
  <center>
    <br>
    <span class="title">Verify new words</span>
    <h4><font color="white">Help our community by verifying new entries to the vocabulary.</font></h4>
  </center>

  <hr>
  <br>
  <br>
  <br>

    <div class="boxed" id="box">
      <center>
        <br>
        <div class="myword" id="word"></div>
        <div class="mytranslation" id="translation"></div>
        <br>
        <img src="/pics/decline.png" alt="decline" onclick="verify(0)" style="width:15%"> &emsp;
        <img src="/pics/unknown.png" alt="unknown" onclick="newword()" style="width:15%"> &emsp;
        <img src="/pics/accept.png" alt="accept" onclick="verify(1)" style="width:15%">
      </center>
    </div>


</body>



<script>
/*
Ja, ich weiß dass JS nicht hier integriert wird, aber es muss nach der implementierung sein.
Einfach nicht fragen!!!

newword() holt ein neues Wort und zeigt es an. Wird am Anfang einmal ausgeführt und jedes mal, wenn der Nutzer das Wort nicht kennt.
*/
newword();

function newword(){

  document.getElementById('word').innerHTML ="loading...";
  document.getElementById('translation').innerHTML ="";

  var url = "http://wordshare.kaiseritea.de/server/functions/getWord.php?username=" + getCookie("username") + "&&type=verification";
  var response = httpGet(url);
  var wordsJSON = JSON.parse(response);

  document.getElementById('word').innerHTML = wordsJSON[0].word;
  document.getElementById('translation').innerHTML = wordsJSON[0].translation;

  setCookie("tempword", wordsJSON[0].word);

}

function httpGet(theUrl){

  var xmlHttp = new XMLHttpRequest();
  xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
  xmlHttp.send( null );
  return xmlHttp.responseText;

}

function verify(val){

    var username = getCookie("username");     //geht das so?
    // var word = document.getElementById("word").value;
    var word = getCookie('tempword')    //woher kommt das?

    var url = "http://wordshare.kaiseritea.de/server/functions/word-verification.php?username=" + username + "&&validation=" + val + "&&word=" + word;

    if (username!='' && word!=''){
        console.log(url);
        var success = httpGet(url);
        console.log(success);
        if(success == "1"){
          newword();
        }
        else{
          alert("Nein. Einfach nur nein.");
        }
    }
    else{
        alert("Nope");
    }
  }


</script>


</html>
