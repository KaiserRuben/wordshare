<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  <title>WordShare - New vocabulary</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!--  CSS inplementierung in externer Datei-->
  <link rel="stylesheet" href="css/daily_word.css" type="text/css">
  <link rel="stylesheet" href="css/main.css" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu|Cabin|PT+Sans+Narrow" rel="stylesheet">
  <script language="javascript" type="text/javascript" src="js/cookiefunctions.js"></script>


  <!-- <script src="js/verification.js"></script> -->

  <!-- <script>
  // When the user clicks on <div>, open the popup
  function myFunction() {
    var popup = document.getElementById("myPopup");
    popup.classList.toggle("show");
  }
  </script> -->
</head>


<body><footer>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="icon-bar">
  <a href="#"> <img height="50px" style="margin-right:12%" src="\pics\add.png"></a>
  <a href="#"> <img height="50px" style="margin-top:5%" src="\pics\word.png"></a>
  <a href="#"> <img height="50px" style="margin-left:12%" src="\pics\edit.png"></a>


</div></footer>

  <center>
    <h1>Verify new vocabulary</h1><br>
    <h4><font color="white">Help our community by verifying new entries to the vocabulary.</font></h4>
  </center>

  <hr>

  <div class="new_word">
    <div class="boxed">
      <center>
        <font color="white"><h1 id="word"></h1></font>
      </center>
    </div>
    <div class="new_word_translated">
      <center>
        <font color="white"><h2 id="translation"></h2></font>
      </center>
    </div>
    <br>
  </div>

  <center>
    <div class="button-group">
        <img src="/pics/decline.png" alt="decline" onclick="verify(0)" style="width:25%"> &emsp;
        <img src="/pics/unknown.png" alt="unknown" onclick="newword()" style="width:25%"> &emsp;
        <img src="/pics/accept.png" alt="accept" onclick="verify(1)" style="width:25%">
    </div>
  </center>

  <!-- Hier sind die ursprünglichen Buttons
  <div class="button-group">
    <button type="button" class="button" name="decline">Decline</button><button type="button" class="button" name="accept">Accept</button><br />
  </div>-->

  <!-- Hier ist ein Info-Pop-Up
  </div><br><center>
    <div class="popup" onclick="myFunction()"><i class= "white fa fa-info"></i>
      <span class="popuptext" id="myPopup">Swipe left or right to accept or decline a new entry. Use the middle button if you don't know a word.
    </div>
  </center>-->

</body>



<script>
/*
Ja, ich weiß dass JS nicht hier integriert wird, aber es muss nach der implementierung sein.
Einfach nicht fragen!!!

newword() holt ein neues Wort und zeigt es an. Wird am Anfang einmal ausgeführt und jedes mal, wenn der Nutzer das Wort nicht kennt.
*/
document.getElementById('word').innerHTML ="loading...";
newword();

function newword(){
document.getElementById('word').innerHTML ="loading...";

  var url = "http://wordshare.kaiseritea.de/server/functions/getWord.php?username=" + getCookie("username") + "&&type=verification";
  var response = httpGet(url);
  var wordsJSON = JSON.parse(response);

  document.getElementById('word').innerHTML = wordsJSON[0].word;
  document.getElementById('translation').innerHTML = wordsJSON[0].translation;

  setCookie("tempword", wordsJSON[0].word);

}

function httpGet(theUrl){

  var xmlHttp = new XMLHttpRequest();
  xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
  xmlHttp.send( null );
  return xmlHttp.responseText;

}
function verify(val){

    var username = getCookie("username");     //geht das so?
    // var word = document.getElementById("word").value;
    var word = getCookie('tempword')    //woher kommt das?

    var url = "http://wordshare.kaiseritea.de/server/functions/word-verification.php?username=" + username + "&&validation=" + val + "&&word=" + word;

    if (username!='' && word!=''){
        console.log(url);
        var success = httpGet(url);
        console.log(success);
        if(success == "1"){
          location = "wordcheck.html";
        }
        else{
          alert("Nein. Einfach nur nein.");
        }
    }
    else{
        alert("Nope");
    }
  }

</script>


</html>
